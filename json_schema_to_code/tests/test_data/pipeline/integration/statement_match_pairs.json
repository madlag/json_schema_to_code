{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "$id": "/primitive/statement/activities/match_pairs/statement_match_pairs_schema",
  "title": "Statement Match Pairs Activity Schema",
  "x-csharp-using": [
    "EduObject.Activities.MatchPairs",
    "EduObject.Activities.MediaContentTypes"
  ],
  "type": "object",
  "$defs": {
    "StatementMatchPairsProblem": {
      "x-csharp-generate": false,
      "description": "Match pairs problem with an embedded statement (backend-only)",
      "allOf": [
        {
          "$ref": "#/$defs/MatchPairsProblem"
        },
        {
          "type": "object",
          "properties": {
            "statement": {
              "$ref": "#/$defs/StatementDataStatement",
              "description": "The statement providing context"
            }
          },
          "required": [
            "statement"
          ]
        }
      ]
    },
    "StatementMatchPairsData": {
      "x-csharp-generate": false,
      "type": "object",
      "description": "Complete activity data for statement match pairs (backend-only)",
      "allOf": [
        {
          "$ref": "#/$defs/MatchPairsData"
        },
        {
          "properties": {
            "problem": {
              "$ref": "#/$defs/StatementMatchPairsProblem",
              "description": "The statement match pairs problem"
            }
          }
        }
      ]
    },
    "MatchPairsProblem": {
      "x-csharp-generate": false,
      "type": "object",
      "description": "Problem with correct pairings (backend-only). Question comes from context.",
      "properties": {
        "correct_pairs": {
          "type": "array",
          "description": "The correct pairings",
          "items": {
            "$ref": "#/$defs/MatchPair"
          },
          "minItems": 2
        }
      },
      "required": [
        "correct_pairs"
      ],
      "additionalProperties": false
    },
    "MatchPairsData": {
      "x-csharp-generate": false,
      "type": "object",
      "description": "Complete activity data (backend-only)",
      "properties": {
        "problem": {
          "$ref": "#/$defs/MatchPairsProblem",
          "description": "The match pairs problem"
        },
        "state": {
          "$ref": "#/$defs/MatchPairsState",
          "default": null,
          "description": "Current pairing state"
        },
        "ui_data": {
          "$ref": "#/$defs/MatchPairsUIData",
          "default": null,
          "description": "UI rendering data"
        }
      },
      "required": [
        "problem",
        "state",
        "ui_data"
      ],
      "additionalProperties": false
    },
    "StatementDataStatement": {
      "type": "object",
      "description": "The statement content: this will be question for the quiz or other activities",
      "properties": {
        "text": {
          "type": "string",
          "description": "The textual content of the statement"
        }
      },
      "required": [
        "text"
      ]
    },
    "MatchPair": {
      "x-csharp-generate": false,
      "type": "object",
      "description": "A correct pairing of left and right content (backend-only)",
      "properties": {
        "left": {
          "$ref": "/activities/media_content/media_content_types_schema#/$defs/MediaContentType",
          "description": "Left side content"
        },
        "right": {
          "$ref": "/activities/media_content/media_content_types_schema#/$defs/MediaContentType",
          "description": "Right side content"
        }
      },
      "required": [
        "left",
        "right"
      ],
      "additionalProperties": false
    },
    "MatchPairsState": {
      "x-csharp-generate": false,
      "type": "object",
      "description": "Current pairings as integer pairs (shuffled initially)",
      "properties": {
        "pairs": {
          "type": "array",
          "description": "Current pairings - list of index pairs",
          "items": {
            "$ref": "#/$defs/IntegerPair"
          },
          "default": []
        }
      },
      "required": [
        "pairs"
      ],
      "additionalProperties": false
    },
    "MatchPairsUIData": {
      "type": "object",
      "description": "UI data for rendering",
      "properties": {
        "common": {
          "$ref": "/activities/ui_schema#/$defs/UIDataCommonFields",
          "default": null
        },
        "rows": {
          "type": "array",
          "description": "Rows of left-right pairs",
          "items": {
            "$ref": "#/$defs/MatchPairsUIRow"
          },
          "default": []
        },
        "action": {
          "$ref": "/activities/ui_schema#/$defs/UIAction",
          "description": "Action template for swapping pairs (MOVE operation)",
          "default": null
        }
      },
      "required": [
        "common",
        "rows",
        "action"
      ],
      "additionalProperties": false
    },
    "IntegerPair": {
      "type": "object",
      "description": "Pair of integers representing left/right indices",
      "properties": {
        "left_index": {
          "type": "integer",
          "description": "Index of left item in correct_pairs"
        },
        "right_index": {
          "type": "integer",
          "description": "Index of right item in correct_pairs"
        }
      },
      "required": [
        "left_index",
        "right_index"
      ],
      "additionalProperties": false
    },
    "MatchPairsUIRow": {
      "type": "object",
      "description": "A row with left and right items",
      "properties": {
        "left": {
          "$ref": "#/$defs/MatchPairsUIItem",
          "description": "Left side item"
        },
        "right": {
          "$ref": "#/$defs/MatchPairsUIItem",
          "description": "Right side item"
        }
      },
      "required": [
        "left",
        "right"
      ],
      "additionalProperties": false
    },
    "MatchPairsUIItem": {
      "type": "object",
      "description": "UI item for left or right side",
      "properties": {
        "index": {
          "type": "integer",
          "description": "Index in the correct_pairs array"
        },
        "content": {
          "$ref": "/activities/media_content/media_content_types_schema#/$defs/MediaContentType",
          "description": "The content to display"
        }
      },
      "required": [
        "index",
        "content"
      ],
      "additionalProperties": false
    }
  },
  "$ref": "#/$defs/StatementMatchPairsData"
}
