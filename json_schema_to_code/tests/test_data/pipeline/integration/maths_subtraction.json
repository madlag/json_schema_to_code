{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "title": "Subtraction Schema",
  "type": "object",
  "description": "Schema representing the state of a column subtraction with borrowing being computed by a human, so it may be incomplete or partially incorrect.",
  "properties": {
    "type": {
      "type": "string",
      "const": "maths/basic_operations/subtraction"
    },
    "problem": {
      "type": "object",
      "description": "The subtraction problem being solved",
      "properties": {
        "minuend": {
          "type": "integer",
          "description": "The top number (number being subtracted from)",
          "minimum": 0
        },
        "subtrahend": {
          "type": "integer",
          "description": "The bottom number (number being subtracted)",
          "minimum": 0
        }
      },
      "required": [
        "minuend",
        "subtrahend"
      ],
      "unevaluatedProperties": false
    },
    "state": {
      "type": "object",
      "description": "Current state of the subtraction computation",
      "properties": {
        "swapped_arguments": {
          "type": "boolean",
          "description": "Whether the minuend and subtrahend have been swapped (for negative results)"
        },
        "final_sign": {
          "type": "string",
          "description": "The sign of the final result (+ or -)",
          "enum": [
            "+",
            "-"
          ]
        },
        "borrowing_row": {
          "type": "array",
          "description": "Borrowing row. One mark for each column. For example for 543 - 178, the borrowing row might be [1, 1, 0] indicating borrowing in units and tens columns. Index 0 = units, 1 = tens, etc. Humans typically mark a 1 where borrowing occurs.",
          "items": {
            "oneOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 1
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "adjusted_minuend_row": {
          "type": "array",
          "description": "Adjusted minuend row showing digits after borrowing. For example, if top number is 543 and we borrow from the tens place, the 4 becomes 3. Index 0 = units, 1 = tens, etc. Values can be 0-19 (when 10 is added from borrowing).",
          "items": {
            "oneOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 19
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "result_row": {
          "type": "array",
          "description": "Result row. Index 0 = units, 1 = tens, etc.",
          "items": {
            "oneOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 9
              },
              {
                "type": "null"
              }
            ]
          }
        }
      },
      "required": [
        "borrowing_row",
        "adjusted_minuend_row",
        "result_row"
      ],
      "unevaluatedProperties": false
    },
    "correct_answer": {
      "type": "string"
    },
    "question_text": {
      "type": "string"
    }
  },
  "required": [
    "type",
    "problem",
    "state",
    "correct_answer",
    "question_text"
  ],
  "unevaluatedProperties": false,
  "$defs": {}
}
